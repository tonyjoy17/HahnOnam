<div style="width: 100%;">
<div class="page-heading">
  HahnOnam 2025
</div>

<div class="scoreboard-container" *ngIf="!loading && !error; else stateTpl">

  <!-- Top: Winning Team & Top Individual -->
  <div class="top-cards">
    <mat-card class="card">
      <!-- CHANGED: use top-card-header (NOT class="mat-card-title") -->
      <mat-card-header class="top-card-header">
        <mat-card-title>üèÜ Winning Team</mat-card-title>
        <!-- <mat-card-subtitle>Olympic tiebreak (Gold ‚Üí Silver ‚Üí Bronze ‚Üí Points)</mat-card-subtitle>  -->
      </mat-card-header>
      <mat-card-content *ngIf="highlights?.topTeam; else noTopTeam">
        <div class="big-line">
          <span class="name">{{ highlights?.topTeam?.teamName }}</span>
          <span class="points">{{ highlights?.topTeam?.totalPoints }} pts</span>
        </div>
        <div class="medal-line">
          <span>ü•á {{ highlights?.topTeam?.gold }}</span>
          <span>ü•à {{ highlights?.topTeam?.silver }}</span>
          <span>ü•â {{ highlights?.topTeam?.bronze }}</span>
        </div>
      </mat-card-content>
      <ng-template #noTopTeam>
        <div class="placeholder">No team results yet</div>
      </ng-template>
    </mat-card>

    <mat-card class="card">
      <!-- CHANGED: use top-card-header -->
      <mat-card-header class="top-card-header">
        <mat-card-title>‚≠ê Top Individual</mat-card-title>
        <!-- <mat-card-subtitle>Most points across all individual events</mat-card-subtitle> -->
      </mat-card-header>
      <mat-card-content *ngIf="highlights?.topPlayer; else noTopPlayer">
        <div class="big-line">
          <span class="name">{{ highlights?.topPlayer?.playerName }}</span>
          <span class="points">{{ highlights?.topPlayer?.points }} pts</span>
        </div>
        <div class="meta">
          <span>Team: {{ highlights?.topPlayer?.teamName }}</span>
        </div>
        <div class="medal-line">
          <span>ü•á {{ highlights?.topPlayer?.gold }}</span>
          <span>ü•à {{ highlights?.topPlayer?.silver }}</span>
          <span>ü•â {{ highlights?.topPlayer?.bronze }}</span>
        </div>
      </mat-card-content>
      <ng-template #noTopPlayer>
        <div class="placeholder">No individual results yet</div>
      </ng-template>
    </mat-card>
  </div>

  <!-- Bottom: Detailed Tables -->
  <div class="tables">
    <mat-card class="table-card">
      <mat-card-header><mat-card-title class="teamstanding">Team Standings</mat-card-title></mat-card-header>
      <div class="table-wrap">
        <table mat-table [dataSource]="teamRows" class="mat-elevation-z1">
          <ng-container matColumnDef="rank">
            <th mat-header-cell *matHeaderCellDef>#</th>
            <td mat-cell *matCellDef="let r">{{ r.rank }}</td>
          </ng-container>

          <ng-container matColumnDef="teamName">
            <th mat-header-cell *matHeaderCellDef>Team</th>
            <td mat-cell *matCellDef="let r">{{ r.teamName }}</td>
          </ng-container>

          <ng-container matColumnDef="gold">
            <th mat-header-cell *matHeaderCellDef>ü•á</th>
            <td mat-cell *matCellDef="let r">{{ r.gold }}</td>
          </ng-container>

          <ng-container matColumnDef="silver">
            <th mat-header-cell *matHeaderCellDef>ü•à</th>
            <td mat-cell *matCellDef="let r">{{ r.silver }}</td>
          </ng-container>

          <ng-container matColumnDef="bronze">
            <th mat-header-cell *matHeaderCellDef>ü•â</th>
            <td mat-cell *matCellDef="let r">{{ r.bronze }}</td>
          </ng-container>

          <ng-container matColumnDef="totalPoints">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let r">{{ r.totalPoints }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="teamDisplayed"></tr>
          <tr mat-row *matRowDef="let row; columns: teamDisplayed;"></tr>
        </table>
      </div>
    </mat-card>

    <mat-card class="table-card">
      <mat-card-header ><mat-card-title class="playerstanding">Individual Standings</mat-card-title></mat-card-header>
      <div class="table-wrap" style="
    height: 400px;">
        <table mat-table [dataSource]="playerRows" class="mat-elevation-z1" style="
    overflow-x: auto;">
          <ng-container matColumnDef="rank">
            <th mat-header-cell *matHeaderCellDef>#</th>
            <td mat-cell *matCellDef="let r">{{ r.rank }}</td>
          </ng-container>

          <ng-container matColumnDef="playerName">
            <th mat-header-cell *matHeaderCellDef>Player</th>
            <td mat-cell *matCellDef="let r">{{ r.playerName }}</td>
          </ng-container>

         <ng-container matColumnDef="teamName" style="display: none;">
            <th mat-header-cell *matHeaderCellDef>Team</th>
            <td mat-cell *matCellDef="let r">{{ r.teamName }}</td>
          </ng-container>

          <ng-container matColumnDef="gold">
            <th mat-header-cell *matHeaderCellDef>ü•á</th>
            <td mat-cell *matCellDef="let r">{{ r.gold }}</td>
          </ng-container>

          <ng-container matColumnDef="silver">
            <th mat-header-cell *matHeaderCellDef>ü•à</th>
            <td mat-cell *matCellDef="let r">{{ r.silver }}</td>
          </ng-container>

          <ng-container matColumnDef="bronze">
            <th mat-header-cell *matHeaderCellDef>ü•â</th>
            <td mat-cell *matCellDef="let r">{{ r.bronze }}</td>
          </ng-container>

          <ng-container matColumnDef="totalPoints">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let r">{{ r.totalPoints }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="playerDisplayed"></tr>
          <tr mat-row *matRowDef="let row; columns: playerDisplayed;"></tr>
        </table>
      </div>
    </mat-card>
  </div>

<div class="tables">
   
<mat-card class="table-card" *ngIf="resultRows.length > 0">
  <mat-card-header>
    <mat-card-title class="resultsheading playerstanding">Event Results</mat-card-title>
  </mat-card-header>
  <div class="table-wrap" style="
    height: 400px;">
    <table mat-table [dataSource]="resultRows" class="mat-elevation-z1">

      <ng-container matColumnDef="eventName">
        <th mat-header-cell *matHeaderCellDef>Event</th>
        <td mat-cell *matCellDef="let r">{{ r.eventName }}</td>
      </ng-container>

      <ng-container matColumnDef="firstPlace">
        <th mat-header-cell *matHeaderCellDef>ü•á</th>
        <td mat-cell *matCellDef="let r">{{ r.firstPlace }}</td>
      </ng-container>

      <ng-container matColumnDef="secondPlace">
        <th mat-header-cell *matHeaderCellDef>ü•à</th>
        <td mat-cell *matCellDef="let r">{{ r.secondPlace }}</td>
      </ng-container>

      <ng-container matColumnDef="thirdPlace">
        <th mat-header-cell *matHeaderCellDef>ü•â</th>
        <td mat-cell *matCellDef="let r">
          {{ r.isTeamGame ? '-' : (r.thirdPlace || '-') }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="resultDisplayed"></tr>
      <tr mat-row *matRowDef="let row; columns: resultDisplayed;"></tr>
    </table>
  </div>
</mat-card>

</div>

  
</div>

</div>
<ng-template #stateTpl>
  <div class="state" *ngIf="loading">Loading‚Ä¶</div>
  <div class="state error" *ngIf="!loading && error">{{ error }}</div>
</ng-template>
